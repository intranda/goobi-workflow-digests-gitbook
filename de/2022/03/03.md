---
description: >-
  Entwicklungen und Neuigkeiten zu Goobi workflow
---

# M√§rz 2022

## Neues GoobiScript zum √Ñndern von Personen-Rollen
Es gibt bereits seit einiger Zeit verschiedene GoobiScripts, die sehr bequem √Ñnderungen sogar an Metadaten in Masse vornehmen k√∂nnen. Dabei haben wir uns in der Vergangenheit oft auf regul√§re Metadaten konzentriert. Mit einem neuen GoobiScript erlauben wir jetzt auch √Ñnderungen bei Personen. Hierbei geht das darum, dass eine bequeme M√∂glichkeit ben√∂tigt wurde, um die Rollen von Personen in Masse √§ndern zu k√∂nnen, um beispielsweise in 100.000 Vorg√§ngen aus verkehrt zugewiesenen Personenrollen als Autoren stattdessen Erfinder machen zu k√∂nnen. In einem solchen Fall w√ºrde der Aufruf des neuen GoobiScripts wie folgt aussehen:

```yaml
# This GoobiScript allows to change the type of an existing person.
action: metadataChangePersonType

# Define the current type that shall be changed. Use the internal name here (e.g. `TitleDocMain`), not the translated display name (e.g. `Main title`).
oldType: Author

# Define the type that shall be used as new type. Use the internal name here as well.
newType: Inventor

# Define where in the hierarchy of the METS file the searched term shall be replaced. Possible values are: `work` `top` `child` `any`
position: work

# Define if the further processing shall be cancelled for a Goobi process if an error occures (`false`) or if the processing should skip errors and move on (`true`).
# This is especially useful if the the value `any` was selected for the position.
ignoreErrors: true
```

Dieses und die vielen anderen GoobiScripts finden sich wie immer in der Online-Doku detailliert beschrieben.

![√Ñndern von Personenrollen via GoobiScript](2203_goobiscript1_de.png)

Hier der Link zur weiteren Hilfe:

{% embed url="https://docs.goobi.io/goobi-workflow-de/manager/7/7.4" caption="https://docs.goobi.io/goobi-workflow-de/manager/7/7.4" %}


## Neue Dokumentation f√ºr Entwickler
Lang hat es gedauert. Aber daf√ºr ist es auch wirklich gut geworden: Es gibt nun eine sehr ausf√ºhrliche Dokumentation f√ºr k√ºnftige Goobi workflow Entwickler. Dort wird detailliert aufgezeigt, wie man sich eine Entwicklungsumgebung aufsetzt, welche Tools f√ºr die Inbetriebnahme ben√∂tigt werden und welche Einstellungen man hier und da vornehmen sollte, damit die Entwicklung fl√ºssig von der Hand geht.

![Einrichtung der Entwicklungsumgebung](2203_dev_de.png)

Um es den k√ºnftigen Entwicklern m√∂glichst einfach zu machen haben wir innerhalb der Anleitung auch gleich noch dokumentiert, wie man sich sehr bequem einen kleinen sinnvollen Datenbestand einrichtet, damit die Entwicklung auch mit tats√§chlichen sinnvollen Daten m√∂glich ist. Hierzu kamen uns die vielen Erfahrungen im Umgang mit Goobi-to-go zugute.

Wer also schon immer mal an Goobi mitentwickeln wollte, hat es nun einfacher denn je. Hier gehts zur Doku:

{% embed url="https://docs.goobi.io/goobi-workflow-de/dev/1" caption="https://docs.goobi.io/goobi-workflow-de/dev/1" %}


## Export-Button nun in der Spalte "Aktionen" der Vorgangsdetails
Goobi worklow erlaubt schon seit einiger Zeit, dass innerhalb eines Workflows Exporte auch √ºber Plugins stattfinden k√∂nnen. Diese ist f√ºr individuelle Exporte zu besonderen Systemen mit besonderen Formatanforderungen manchmal notwendig. Wenn allerdings innerhalb eines Workflows mehrere Exporte stattfinden sollen, dann war es bisher f√ºr Administratoren nicht m√∂glich einen bestimmten Export eines Workflows gezielt auszuf√ºhren. Im Rahmen des Durchlaufens des Workflows hingegen funktionierten die Exporte jedoch bereits so wie gew√ºnscht.

![Button f√ºr Export beim Arbeitsschritt](2203_export_icon_de.png)

Um es nun auch f√ºr die Goobi Administratoren zu vereinfachen, dass gezielt einzelne Export-Schritte selektiv manuell aufzurufen, werden Export-Buttons nun innerhalb der Vorgangsdetails direkt neben den betreffenden Aufgaben angezeigt. Damit ist ein Aufruf jetzt wie gew√ºnscht m√∂glich geworden.


## Besseres Looging beim √Ñndern eines Schrittstatus via GoobiScript
Uns ist aufgefallen, dass das Logging innerhalb des Vorgangslogs noch verbesserungsw√ºrdig war, wenn mittels GoobiScript der Status von Aufgaben ge√§ndert wurde. Wir wollten gern, dass sowohl der alte als auch der neu gesetzte Status im Vorgangslog noch weiterhin gut nachvollziehbar sein sollten. Aus diesem Grund gab es hier jetzt eine kleine Anpassung, die solche Status√§nderungen besser nachvollziehbar macht.

![Log-Meldungen beim √Ñndern des Schrittstatus via GoobiScript](2203_goobiscript_log_de.png)


## Benennung der Backup-Dateien im Editor f√ºr Konfigurationsdateien und Regels√§tze
Wir hatten k√ºrzlich bereits die Benennung der Backup-Dateien f√ºr die METS-Dateien der Goobi-Vorg√§nge dahingehend ge√§ndert, dass diese im besser nachvollziehbar sind, nicht weiter rotieren und damit unn√∂tige Schreibzugriffe auf langsame Speicherbereiche verursachen. Um dieses Benennungsschema nun konsequent umzusetzen, wenden wir diesen Mechanismus ab sofort ebenfalls f√ºr die automatisch erzeugten Backups der Dateien an, die innerhalb der noch recht neuen Editoren f√ºr die Konfigurationsdateien und Regels√§tze erzeugt werden.

![Editor f√ºr Konfigurationsdateien](2203_config_backups1_de.png)

Auch hier ist die Benennung der Backup-Dateien nun so, dass aus dem Dateinamen unmittelbar das Datum und die Zeit des Backups ersichtlich wird und hilft im Falles des Falles gut weiter.

![Erzeugte Backup mit besserer Benennung](2203_config_backups2.png)


## WCAG: √Ñnderungen hier und da
Dass uns das Thema der Barrierefreiheit nicht nur interessiert sondern auch Vollzeit besch√§ftigt haben wir ja schon des √∂fteren beschrieben. Insofern ist es nur konsequent, dass wir auch in diesem Monat wieder viele Kleinigkeiten zugunsten der Accessibility verbessert haben. Dies betraf nun vor allem die Darstellung des Vorgangslogs und einige Anpassungen f√ºr die Anzeige der Vorgangsliste.

![Accessibility f√ºr die Vorgangsliste](2203_wcag_de.png)

Es wird aber sicher nicht das letzte Mal sein, dass dieser Punkt hier in den Digests aufgef√ºhrt wird. üòÄ


## Implementierung einer ARK-Registrierung
Wir haben in der Vergangenheit bereits verschiedene Mechanismen f√ºr persistente Identifier in Goobi workflow integriert. So fanden neben URN auch Handle und DOI ihren Weg in das Goobi-Universum. Neu hinzugekommen ist k√ºrzlich die Unterst√ºtzung von ARK-Identifiern. Hierbei handelt es sich um ein weiteres System, das im Zusammenspiel mit dem Goobi viewer eine dauerhafte Verlinkung von Werken und auch eine granulare Verlinkung auf Seitenebene erlaubt. Im Gegensatz zu anderen Systemen erfordern ARK-Identifier keine Lizenzkosten und k√∂nnen eigenst√§ndig frei vergeben werden. Mehr Informationen zu ARK im Allgemeinen finden sich hier:

{% embed url="https://arks.org/" caption="https://arks.org/" %}

Und hier findet sich die Dokumentation f√ºr das von uns entwickelte Plugin:

{% embed url="https://docs.goobi.io/goobi-workflow-plugins-de/step/intranda_step_ark" caption="https://docs.goobi.io/goobi-workflow-plugins-de/step/intranda_step_ark" %}

Der Quellcode zum Plugin findet sich bei GitHub hier ver√∂ffentlicht:

{% embed url="https://github.com/intranda/goobi-plugin-step-ark" caption="https://github.com/intranda/goobi-plugin-step-ark" %}


## Regelsatz als neue Spalte f√ºr Vorg√§nge und Produktionsvorlagen
Manchmal ist es hilfreich, wenn man gleich auf einen Blick sieht, welcher Regelsatz f√ºr eine Produktionsvorlage Verwendung findet. Aus diesem Grund kann der Regelsatz ab sofort innerhalb der Auflistung von Vorg√§ngen und Produktionsvorlagen eingeblendet werden. So sieht das dann aus:

![Regelsatz als m√∂gliche Spalte in der Tabellenansicht](2203_ruleset_column_de.png)


## Plugin zum Versenden von Mails
Es wurde ein neues Plugin f√ºr das Versenden von Mails innerhalb einer Aufgabe entwickelt. Die Liste der Empf√§nger und der Text lassen sich dabei f√ºr verschiedene Schritte individuell konfigurieren. Dabei stehen auch alle Felder aus dem Variablen-Replacer zur Verf√ºgung. Somit kann auch auf Metadaten oder Informationen zum Vorgang, Schritt oder Projekt zur√ºckgegriffen werden, um diese innerhalb der Mail zu verwenden.

![Versenden von Mails](2203_mail_de.png)

Die ausf√ºhrliche Dokumentation f√ºr die Inbetriebnahme des Plugins findet sich hier:

{% embed url="https://docs.goobi.io/goobi-workflow-plugins-de/step/intranda_step_sendmail" caption="https://docs.goobi.io/goobi-workflow-plugins-de/step/intranda_step_sendmail" %}

Und an dieser Stelle findet sich das Plugin als Quellcode und in kompilierter Fassung:

{% embed url="https://github.com/intranda/goobi-plugin-step-sendMail" caption="https://github.com/intranda/goobi-plugin-step-sendMail" %}


## Erweiterung der Benutzereinstellungen zur individuellen Konfiguration des Anzeigemodus

Im Bereich "Allgemein" gibt es nun die M√∂glichkeit, den Anzeigemodus individuell festzulegen. Hier kann zwischen Normaler Anzeige, Low Vision Modus und WCAG kompatiblen Modus gew√§hlt werden.

![Einstellbarer Anzeigemodus pro Nutzer](2203_display_mode_de.png)


## Plugin zum Export von Zeitungen in das DDB Zeitungsportal
Wir haben ein neues Plugin f√ºr den Export von Zeitungen f√ºr das Zeitungsportal der DDB entwickelt. Das Plugin dient zur Erstellung der spezifischen METS-Struktur, die von Seiten der DDB f√ºr Zeitungen gefordert werden. Dabei wird f√ºr die Gesamtaufnahme einer Zeitung eine METS-Anchor Datei erzeugt. (https://wiki.deutsche-digitale-bibliothek.de/display/DFD/Gesamtaufnahme+Zeitung+1.0)

F√ºr jeden exportierten Jahrgang wird eine weitere METS-Anchor Datei erzeugt und innerhalb der Gesamtaufnahme verlinkt. Der Jahrgang enth√§lt weitere Strukturen f√ºr Monat und Tag. (https://wiki.deutsche-digitale-bibliothek.de/display/DFD/Jahrgang+Zeitung+1.0)

Jede Ausgabe hingegen wird als einzelne METS-Datei erstellt und in der METS-Anchor Datei des jeweiligen Jahrgangs verlinkt. Die Ausgabe kann weitere Strukturdaten wie Artikelbeschreibungen oder Beilagen enthalten. Hier wird auch auf die digitalisierten Bilder verwiesen. (https://wiki.deutsche-digitale-bibliothek.de/display/DFD/Ausgabe+Zeitung+1.0)

Eine detaillierte Dokumentation f√ºr das Plugin findet sich hier:
{% embed url="https://docs.goobi.io/goobi-workflow-plugins-de/export/intranda_export_newspaper" caption="https://docs.goobi.io/goobi-workflow-plugins-de/export/intranda_export_newspaper" %}

Und an dieser Stelle findet sich dann sowohl der Quellcodes des Plugins als auch die kompilierte Fassung des Plugins:
{% embed url="https://github.com/intranda/goobi-plugin-export-newspaper" caption="https://github.com/intranda/goobi-plugin-export-newspaper" %}


## Umfangreiche Umstellungen in der internen Projektstruktur
Die Entwicklung an Goobi workflow startete bereits im Jahr 2004. In der Zwischenzeit hat sich funktioniell viel Neues ergeben und die Applikation ist um ein vielfaches gewachsen. Um hierbei einerseits den √úberblick weiterhin gut zu bewahren aber auch um etablierte Best-Practice f√ºr Software-Entwicklung einzuhalten (Maven-Verzeichnisstruktur) sowie k√ºnftig auch noch einfacher stets auf aktuellem Stand der verwendeten Programmbibliotheken zu bleiben, haben wir die Projektstruktur massiv √ºberarbeitet. Dies sollte funktioniell f√ºr die Anwender keine √Ñnderung mit sich bringen. F√ºr uns als Entwickler sind das allerdings umfangreiche Eingriffe in den Arbeitsalltag und die Projektorganisation. Wenn Ihnen bei der Benutzung von Goobi workflow in kommender Zeit unerw√ºnschte Seiteneffekte auffallen sollten, die sicher nicht gew√ºnscht sein sollten, so lassen Sie uns dies bitte wissen.

![Geschlossene potentielle Sicherheitsl√ºcken](2203_security_de.png)

Im √úbrigen haben sich durch diese Umstellungen auch bereits einige positive Ergebnisse gezeigt. Die durch die Umstellung vorgenommenen Updates verschiedener Programmbibliotheken f√ºhrten bereits zu einer messbaren Steigerung der Sicherheit potentiell angreifbarer Code-Bestandteile externer Bibliotheken und eine bessere Automatisierbarkeit des Testens auf m√∂gliche k√ºnftige Sicherheitsl√ºcken.


## Darstellungsfehler in einem Dropdown in den eigenen Aufgaben
Es gab einen kleinen Darstellungsfehler innerhalb der eigenen Aufgaben. Dort bestand ein eigenwilliger Zeilenumbruch mit ungew√∂hnlicher Zeichendarstellung, die dort nicht hingeh√∂rte. Dies haben wir korrigiert. Nix passiert. üòÄ


## Versionsbezeichnung
Die aktuelle Versionsnummer von Goobi workflow lautet mit diesem Release: **22.03**.
Innerhalb von Plugin-Entwicklungen muss f√ºr Maven-Projekte innerhalb der Datei `pom.xml` entsprechend folgende Abh√§ngigkeit eingetragen werden:

```xml
<dependency>
  <groupId>de.intranda.goobi.workflow</groupId>
  <artifactId>goobi-core-jar</artifactId>
  <version>22.03</version>
</dependency>
```